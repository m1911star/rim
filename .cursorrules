# RIM - Mathematical Visualization Tool - Cursor Rules

## ğŸ¯ Project Overview
RIM is a high-performance mathematical visualization tool built with Bevy game engine, inspired by Manim. It combines Manim's excellent mathematical animation design philosophy with Bevy's modern game engine architecture.

## ğŸ“ Project Structure
```
src/
â”œâ”€â”€ main.rs              # Main application entry point
â”œâ”€â”€ animation/           # Animation system (planned)
â”œâ”€â”€ export/             # Export functionality (PNG, SVG, GIF, MP4)
â”œâ”€â”€ interaction/        # User interaction handling
â”œâ”€â”€ math_objects/       # Mathematical objects (axes, shapes, functions)
â”‚   â”œâ”€â”€ axes.rs         # Coordinate system implementation
â”‚   â”œâ”€â”€ basic_shapes.rs # Basic geometric shapes
â”‚   â””â”€â”€ function_graph.rs # Function plotting
â””â”€â”€ render/             # Rendering system using Bevy Gizmos
```

## ğŸ› ï¸ Technology Stack
- **Core Engine**: Bevy 0.16.1
- **UI Framework**: bevy_egui
- **Screenshot System**: Bevy's built-in screenshot API
- **Mathematics**: nalgebra
- **Language**: Rust (Edition 2024)

## ğŸ“ Commit Message Guidelines

commit message should be in English.

### Format
```
<emoji> <type>: <description>

[optional body]
```

### Commit Types with Emojis
- `âœ¨ feat:` - New features
- `ğŸ› fix:` - Bug fixes
- `ğŸ“ docs:` - Documentation updates
- `ğŸ¨ style:` - Code style changes (formatting, etc.)
- `â™»ï¸ refactor:` - Code refactoring
- `âš¡ perf:` - Performance improvements
- `âœ… test:` - Adding or updating tests
- `ğŸ”§ chore:` - Maintenance tasks
- `ğŸš€ deploy:` - Deployment related changes

### Feature-Specific Emojis (Choose ONE that best represents the change)
- `ğŸ“¸` - Screenshot/export functionality
- `ğŸ¯` - Coordinate system features
- `ğŸ¨` - Rendering system
- `ğŸ–±ï¸` - UI/interaction features
- `âŒ¨ï¸` - Keyboard shortcuts
- `ğŸ¬` - Animation features
- `ğŸ“Š` - Mathematical objects

### Examples
```
âœ¨ feat: add screenshot functionality with UI controls and keyboard shortcuts
ğŸ› fix: coordinate axis labels positioning issue
ğŸ“ docs: update README with keyboard shortcuts
â™»ï¸ refactor: improve rendering system performance
ğŸ“¸ feat: add circle rendering with updated README documentation
ğŸ”§ chore: update .cursorrules with documentation requirements
```

## ğŸ¨ Code Style Guidelines

### Rust Conventions
- Use `snake_case` for functions and variables
- Use `PascalCase` for types and structs
- Use `SCREAMING_SNAKE_CASE` for constants
- Prefer explicit types when clarity is important
- Use `Result<T, E>` for error handling
- Add comprehensive documentation for public APIs

### Bevy Specific
- Use Bevy's ECS (Entity Component System) patterns
- Prefer systems over direct entity manipulation
- Use resources for global state
- Follow Bevy's plugin architecture
- Use `Commands` for entity spawning/despawning

### Project Specific
- Mathematical objects should implement `MathObject` trait
- Use `Style` struct for visual properties (color, opacity, etc.)
- Coordinate system uses scale factor of 50.0 pixels per unit
- UI controls should be in the left sidebar panel
- Export functionality should auto-create directories

## ğŸ”§ Development Guidelines

### Adding New Features
1. Create appropriate module in `src/` directory
2. Implement as Bevy plugin when possible
3. Add UI controls in the sidebar
4. Include keyboard shortcuts when applicable
5. **Update README documentation immediately** - Both English and Chinese versions
6. Add export functionality if relevant
7. Update `.cursorrules` if new patterns or conventions are introduced

### Code Changes Protocol
- **ALWAYS update README.md and README_zh.md after implementing new features**
- Update feature status from ğŸ“‹ (planned) to ğŸš§ (in progress) to âœ… (completed)
- Add new keyboard shortcuts to the shortcuts table
- Update usage examples if API changes
- Reflect current project status in roadmap
- Add screenshots or examples when applicable

### Documentation Requirements
- **Immediate Updates**: README must be updated in the same commit as feature implementation
- **Bilingual Support**: Both English (README.md) and Chinese (README_zh.md) versions must be maintained
- **Feature Tracking**: Update current features status section
- **Examples**: Provide code examples for new APIs
- **Screenshots**: Add visual examples for UI changes

### Mathematical Objects
- Implement `Component` trait for ECS integration
- Use `Position2D` for object positioning
- Support visibility control via `Visibility` component
- Include style customization options

### UI Development
- Use `egui` for immediate mode GUI
- Group related controls in collapsible sections
- Provide clear labels and tooltips
- Include status indicators and feedback
- Support both mouse and keyboard interaction

### Export System
- Support multiple formats (PNG implemented, SVG/GIF/MP4 planned)
- Use event-driven architecture with `ExportRequest`
- Auto-generate timestamps for file naming
- Create directories automatically
- Provide user feedback on export status

## ğŸ¯ Current Features Status
- âœ… Coordinate system with axes and grid
- âœ… Visibility controls (show/hide axes/grid)
- âœ… Mouse wheel zoom functionality
- âœ… Keyboard shortcuts (F1, A, G, S keys)
- âœ… PNG screenshot export
- âœ… UI control panel with egui
- ğŸš§ Basic shape rendering (in progress)
- ğŸ“‹ Function graph plotting (planned)
- ğŸ“‹ Animation system (planned)

## ğŸš€ Development Priorities
1. Complete basic shape rendering (circles, lines, rectangles)
2. Implement function graph plotting
3. Add more export formats (SVG, GIF)
4. Develop animation system foundation
5. Add scene save/load functionality

## ğŸ¨ Design Philosophy
- **Mathematical Professionalism**: Designed specifically for mathematical visualization
- **High Performance**: Leverage Rust + ECS architecture benefits
- **Real-time Interaction**: Game engine-level real-time rendering
- **Intuitive API**: Easy-to-use mathematical object creation
- **Cross-platform**: Desktop, mobile, and web support

## ğŸ“š Helpful Resources
- [Bevy Documentation](https://bevyengine.org/)
- [egui Documentation](https://docs.rs/egui/)
- [Manim Community](https://www.manim.community/) (inspiration)

## ğŸ¤ Contributing Guidelines
- Follow the commit message format with emojis
- Write comprehensive tests for new features
- **Update documentation for API changes - README must be updated in the same commit**
- Ensure cross-platform compatibility
- Maintain high performance standards
- **Documentation-First Approach**: No feature is complete without updated README
- Keep both English and Chinese documentation in sync 